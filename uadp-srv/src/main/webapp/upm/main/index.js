webpackJsonp([3],{0:function(e,t,n){e.exports=n(332)},115:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function o(e){d.request.post("upm/login/main.do",function(t){e.setState({userInfo:t})})}function r(e){f({title:"\u786e\u5b9a\u9000\u51fa\u7cfb\u7edf\u5417\uff1f",onOk:function(){d.request.post("upm/login/logout.do",function(e){location.href="login.html"})},onCancel:function(){}})}function a(e,t){console.log("\u4fee\u6539\u5bc6\u7801"),d.request.post("upm/login/modifyPassword.do",e,function(e){t(e)})}function u(e){d.request.post("upm/login/needModifyPassword.do",function(t){1==t&&(s.default.info({title:"\u5bc6\u7801\u4fee\u6539\u63d0\u793a",content:"\u60a8\u9996\u6b21\u767b\u5f55\u7cfb\u7edf\uff0c\u5fc5\u987b\u4fee\u6539\u521d\u59cb\u5bc6\u7801\uff01",onOk:function(){e.setState({isForceModifyPassword:!0,modifyPwVisible:!0})}}),e.setState({isForceModifyPassword:!0})),2==t&&(s.default.info({title:"\u5bc6\u7801\u4fee\u6539\u63d0\u793a",content:"\u60a8\u7684\u767b\u5f55\u5bc6\u7801\u5df2\u7ecf\u8d85\u8fc73\u4e2a\u6708\u6ca1\u6709\u4fee\u6539\uff01",onOk:function(){e.setState({isForceModifyPassword:!0,modifyPwVisible:!0})}}),e.setState({isForceModifyPassword:!0}))})}Object.defineProperty(t,"__esModule",{value:!0});var i=n(21),s=l(i);t.queryUserCfg=o,t.logout=r,t.modifyPassword=a,t.needtModifyPassword=u,n(22);var d=n(15),f=s.default.confirm},273:function(e,t,n){"use strict";n(16),n(433),n(73)},331:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=l(o),a=n(89),u=l(a),i=n(87),s=l(i),d=n(2),f=l(d),c=n(23),p=l(c),m=n(29),h=l(m),y=n(3),g=l(y),w=n(5),v=l(w),b=n(4),E=l(b),P=n(34),M=l(P);n(22),n(90),n(88),n(20),n(31),n(35);var k=n(1),_=l(k),C=n(115),O=M.default.create,S=M.default.Item,I=function(e){function t(n){(0,g.default)(this,t);var l=(0,v.default)(this,e.call(this,n));return l.state={},l}return(0,E.default)(t,e),t.prototype.componentWillUnmount=function(){this.props.form.resetFields()},t.prototype.checkOldPass=function(e,t,n){t?/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,20}$/.test(t)?n():n([new Error("\u5bc6\u7801\u5fc5\u987b\u75318-20\u4f4d\u6570\u5b57\u548c\u5b57\u6bcd\u7ec4\u6210")]):n([new Error("\u8bf7\u8f93\u5165\u539f\u59cb\u5bc6\u7801")])},t.prototype.checkNewPass=function(e,t,n){t?/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,20}$/.test(t)?n():n([new Error("\u5bc6\u7801\u5fc5\u987b\u75318-20\u4f4d\u6570\u5b57\u548c\u5b57\u6bcd\u7ec4\u6210")]):n([new Error("\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801")])},t.prototype.checkRePass=function(e,t,n){if(t){var l=this.props.form.getFieldValue;/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,20}$/.test(t)?t&&t!==l("newPassword")?n([new Error("\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4")]):n():n([new Error("\u5bc6\u7801\u5fc5\u987b\u75318-20\u4f4d\u6570\u5b57\u548c\u5b57\u6bcd\u7ec4\u6210")])}else n([new Error("\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801")])},t.prototype.handModifyPwOk=function(){var e=this,t=this.props.form.getFieldsValue();this.props.form.validateFieldsAndScroll(function(n,l){if(console.log("\u9519\u8bef\uff1a"+n),null==n)return void(0,C.modifyPassword)(t,function(t){t.success?(h.default.success("\u5bc6\u7801\u4fee\u6539\u6210\u529f\uff01"),e.props.form.resetFields(),e.props.modifyPwOk()):h.default.success(t.message)})})},t.prototype.handModifyPwCancel=function(){this.props.form.resetFields(),this.props.modifyPwCancel()},t.prototype.render=function(){var e=this.props.form.getFieldDecorator,t={labelCol:{span:6},wrapperCol:{span:14}};return _.default.createElement(r.default,{title:"\u4fee\u6539\u5bc6\u7801",visible:this.props.visible,onOk:this.handModifyPwOk.bind(this),onCancel:this.handModifyPwCancel.bind(this)},_.default.createElement(u.default,null,_.default.createElement(s.default,null,_.default.createElement("div",{className:"pwd_right"},_.default.createElement(M.default,{horizontal:!0,form:this.props.form},_.default.createElement(S,(0,f.default)({label:"\u539f\u59cb\u5bc6\u7801\uff1a"},t),e("oldPassword",{rules:[{validator:this.checkOldPass.bind(this)}]})(_.default.createElement(p.default,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u539f\u59cb\u5bc6\u7801"}))),_.default.createElement(S,(0,f.default)({label:"\u65b0\xa0\xa0\u5bc6\xa0\xa0\u7801\uff1a"},t),e("newPassword",{rules:[{validator:this.checkNewPass.bind(this)}]})(_.default.createElement(p.default,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u65b0\u5bc6\u7801\uff08\u81f3\u5c118\u4f4d\uff09"}))),_.default.createElement(S,(0,f.default)({label:"\u786e\u8ba4\u5bc6\u7801\uff1a"},t),e("rePassword",{rules:[{validator:this.checkRePass.bind(this)}]})(_.default.createElement(p.default,{type:"password",placeholder:"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801"}))))))))},t}(k.Component);I=O()(I),t.default=I,e.exports=t.default},332:function(e,t,n){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(3),a=o(r),u=n(5),i=o(u),s=n(4),d=o(s),f=n(1),c=o(f),p=n(12),m=n(115),h=l(m),y=n(333),g=o(y);n(44);var w=function(e){function t(n){(0,a.default)(this,t);var l=(0,i.default)(this,e.call(this,n));return l.state={userInfo:{menu:[]}},l}return(0,d.default)(t,e),t.prototype.componentDidMount=function(){h.queryUserCfg(this)},t.prototype.render=function(){var e=this.state.userInfo;if("window"!=e.layout)return c.default.createElement(g.default,{userInfo:e})},t}(f.Component);t.default=w,(0,p.render)(c.default.createElement(w,null),document.getElementById("root")),e.exports=t.default},333:function(e,t,n){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(72),a=o(r),u=n(19),i=o(u),s=n(29),d=o(s),f=n(3),c=o(f),p=n(5),m=o(p),h=n(4),y=o(h),g=n(47),w=o(g),v=n(180),b=o(v);n(73),n(58),n(31),n(48),n(273);var E=n(1),P=o(E),M=(n(12),n(334)),k=o(M),_=n(331),C=o(_),O=n(115),S=l(O);n(447);var I=b.default.SubMenu,T=w.default.Header,R=(w.default.Footer,w.default.Sider),F=w.default.Content,x=function(e){function t(n){(0,c.default)(this,t);var l=(0,m.default)(this,e.call(this,n));return l.toggle=function(){l.setState({collapsed:!l.state.collapsed})},l.state={collapsed:!1,src:"",mode:"inline",moduleTree:[],isTopMenu:!0,defaultOpenKeys:[],defaultSelectedKeys:[],autoRunModules:[],modifyPwVisible:!1,isForceModifyPassword:!1},l}return(0,y.default)(t,e),t.prototype.componentWillMount=function(){S.needtModifyPassword(this)},t.prototype.handleMenuClick=function(e){for(var t=void 0,n=this.props.userInfo.menu,l=0;l<n.length;l++)if(n[l].id==e.key){if(t=n[l].children,null==t){if(""==n[l].url)return void d.default.success(n[l].name+"\u529f\u80fd\u672a\u5f00\u901a!",3);this.setState({src:n[l].url,collapsed:!0})}break}this.setState({moduleTree:t,collapsed:!1})},t.prototype.modifyPwOk=function(){this.setState({modifyPwVisible:!1,isForceModifyPassword:!1})},t.prototype.modifyPwCancel=function(){this.state.isForceModifyPassword?d.default.error("\u5f3a\u5236\u4fee\u6539\u5bc6\u7801\uff0c\u4e0d\u80fd\u53d6\u6d88\uff01"):this.setState({modifyPwVisible:!1})},t.prototype.handleModuleClick=function(e,t,n){var l,o=function t(n){for(var o=0;o<n.length;o++)n[o].id==e.key&&(l=n[o]),null!=n[o].children&&t(n[o].children)},r=this.props.userInfo.menu;if(o(r),""==l.url)return void d.default.success(l.name+"\u529f\u80fd\u672a\u5f00\u901a!",3);var a="";a=l.url.indexOf("?")==-1?l.url+"?"+Math.random():l.url+"&"+Math.random(),this.setState({src:a})},t.prototype.componentWillReceiveProps=function(e){if(null!=e.userInfo.menu&&e.userInfo.menu.length>0)if("true"==e.userInfo.isTopMenu){if(e.userInfo.menu&&e.userInfo.menu.length>0)for(var t=0;t<e.userInfo.menu.length;t++)1==e.userInfo.menu[t].isAutorun&&this.state.autoRunModules.push(e.userInfo.menu[t]);this.setState({isTopMenu:!0,moduleTree:e.userInfo.menu[0].children})}else this.setState({isTopMenu:!1,moduleTree:e.userInfo.menu})},t.prototype.render=function(){var e=this,t=this.props.userInfo,n=this,l=function e(t){return null==t?void(n.state.collapsed=!0):t.map(function(t){return t.children&&t.children.length>0?(0==n.state.defaultOpenKeys.length&&n.state.defaultOpenKeys.push(t.id+""),P.default.createElement(I,{key:t.id,className:"leftMenu-background-color",title:P.default.createElement("span",null,""==t.icon?"":P.default.createElement(i.default,{type:t.icon}),t.name)},e(t.children))):(1==t.isAutorun&&n.state.autoRunModules.push(t),P.default.createElement(b.default.Item,{className:"leftMenu-background-color",key:t.id},P.default.createElement("span",null,""==t.icon?"":P.default.createElement(i.default,{type:t.icon}),t.name)))})},o=l(this.state.moduleTree);return""==this.state.src&&this.state.autoRunModules.length>0&&(this.state.src=this.state.autoRunModules[0].url),P.default.createElement(w.default,{className:"tabRoot"},P.default.createElement(T,{style:{height:60,paddingLeft:10,paddingRight:15,background:"url(upm/main/tab/img/nav.png) repeat-x right top"}},P.default.createElement("div",{style:{float:"left",marginRight:5,background:"url(upm/main/tab/img/nav_title.png) top center no-repeat"}}," ",P.default.createElement("img",{src:"upm/main/tab/img/nav_title.png"})),P.default.createElement(i.default,{style:{cursor:"pointer",float:"left",marginTop:28,color:"white",fontSize:14},type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle}),P.default.createElement("div",{style:{color:"white",float:"right",paddingTop:5,paddingRight:15,height:57,lineHeight:"57px"}},P.default.createElement("span",{style:{marginRight:5}},null==t.userName?"":t.userName),P.default.createElement(a.default,{title:"\u4fee\u6539\u5bc6\u7801"},P.default.createElement("a",{href:"#",onClick:function(){return e.setState({modifyPwVisible:!0})}},P.default.createElement(i.default,{type:"setting",style:{marginLeft:2,fontSize:18,color:"white",verticalAlign:"middle",marginBottom:3,marginRight:3}}))),P.default.createElement(a.default,{title:"\u9000\u51fa\u7cfb\u7edf"},P.default.createElement("a",{href:"#",onClick:S.logout.bind(this)},P.default.createElement(i.default,{type:"logout",style:{fontSize:18,marginLeft:2,color:"white",verticalAlign:"middle",marginBottom:3}}))),P.default.createElement(C.default,{visible:this.state.modifyPwVisible,modifyPwOk:this.modifyPwOk.bind(this),modifyPwCancel:this.modifyPwCancel.bind(this)})),P.default.createElement("div",{style:{float:"right",marginTop:10}},P.default.createElement(i.default,{type:"user",className:"img"})),1==this.state.isTopMenu?P.default.createElement(b.default,{onClick:this.handleMenuClick.bind(this),style:{marginTop:10,marginRight:20,float:"right",border:0,background:"none"},selectedKeys:[this.state.current],mode:"horizontal"},t.menu.map(function(e,t){return P.default.createElement(b.default.Item,{key:e.id,style:{fontSize:"14px",color:"white"}},P.default.createElement("span",null,""==e.icon?"":P.default.createElement(i.default,{type:e.icon}),e.name))})):""),P.default.createElement(w.default,null,P.default.createElement(R,{collapsible:!0,trigger:null,collapsedWidth:0,collapsed:this.state.collapsed,className:"overflow leftMenu-background-color",style:{width:210,borderRightWidth:2,borderRight:"1px solid #bfbfbf"}},P.default.createElement(b.default,{onClick:this.handleModuleClick.bind(this),style:{width:210,backgroundColor:"#e9e9e9"},defaultOpenKeys:this.state.defaultOpenKeys,defaultSelectedKeys:this.state.defaultSelectedKeys,mode:this.state.mode},o)),P.default.createElement(F,{style:{overflow:"hidden"}},P.default.createElement(k.default,{src:this.state.src}))))},t}(E.Component);t.default=x,e.exports=t.default},334:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,a=n(3),u=l(a),i=n(5),s=l(i),d=n(4),f=l(d),c=n(1),p=l(c),m=n(335),h=l(m),y=n(12),g=(l(y),r=o=function(e){function t(){return(0,u.default)(this,t),(0,s.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){return""==this.props.src?p.default.createElement(h.default,null):p.default.createElement("iframe",{src:this.props.src,style:{width:"100%",height:"100%",border:"none",overflow:"auto"}})},t}(c.Component),o.contextTypes={width:p.default.PropTypes.number,height:p.default.PropTypes.number},r);t.default=g,e.exports=t.default},335:function(e,t,n){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r,a=n(3),u=l(a),i=n(5),s=l(i),d=n(4),f=l(d),c=n(1),p=l(c),m=n(12),h=(l(m),r=o=function(e){function t(){return(0,u.default)(this,t),(0,s.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){return p.default.createElement("div",{style:{width:"100%",height:"100%",border:"none",overflow:"auto",background:"url(upm/main/tab/img/main_bg.jpg) top center no-repeat",backgroundSize:"100% 100%"}})},t}(c.Component),o.contextTypes={width:p.default.PropTypes.number,height:p.default.PropTypes.number},r);t.default=h,e.exports=t.default},433:16,447:16});